<head>
	<style>
    html, body, #map-canvas {
      height: 100%;
      margin: 10px;
      padding: 10px;
			font-family: 'Raleway', sans-serif;
			z-index:1;
   		}
  </style>
	
	<script src="../js/papaparse.min.js"></script>
	<script	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBpShV7rlMoA4M7-3l1mi9XLYMsLJo8ZpA&v=3.exp&libraries=visualization"></script>

	<script src="../js/jquery-2.1.1.min.js"></script>
	<script src="https://code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css">

	<script>
		var map, pointarray, heatmap;
		var csv = [];

    	// http://stackoverflow.com/a/2901298/562440
		function numberWithCommas(x) {
				return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
		}

		function handleFileSelect(evt) {
			var file = '../Data/Ready-JS/guatemala-cleaned-compact.js'
			
			Papa.parse(file, {
				header: true,
				dynamicTyping: true,
				complete: function(results) {
					csv = [];

					if(results.meta.fields.indexOf("weight") == -1) {
						for(idx in results["data"]) {
							var row = results["data"][idx];
							csv.push(new google.maps.LatLng(row["lat"], row["lon"]))
						}
					} else {
						var max = results["data"][0]["weight"];

						for(idx in results["data"]) {
							var row = results["data"][idx];
							
							max = Math.max(max, row["weight"]);

							csv.push({
								location: new google.maps.LatLng(row["lat"], row["lon"]),
								weight: row["weight"]
							});
						}

					}
					
					console.log(results);
										
					//loadHeatmap(csv);
				}
			});
		}
		
		function initialize() {
		  var mapOptions = {
			zoom: 6,
			center: new google.maps.LatLng(52, 11),
			mapTypeId: google.maps.MapTypeId.SATELLITE
		  };

		  map = new google.maps.Map(document.getElementById('map-canvas'),
			  mapOptions);
		}
		
		$(document).ready(function(){
			// $("#csv-file").change(handleFileSelect);
			google.maps.event.addDomListener(window, 'load', initialize);
		});
	</script>
</head>
<body>
	<div id="Header">
		<img src='../img/CCBLogo.jpg' alt="Consortium for Capacity Building">
		<h1 margin="10px" >Modified KOEPPEN for ENOS</h1>
	</div>
	<hr>
   <!-- there goes the map -->
	<div id="map-canvas"> </div>
	<hr>
	<div id="Footer">
			<center><p style="color: whitesmoke; background-color:#336600; padding:7px; margin-bottom:10px; margin-top:0px">Copyright Â© 2018 The Consortium for Capacity Building - INSTAAR/University of Colorado in Boulder</p></center>
	</div>

</body>